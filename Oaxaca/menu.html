<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Menu</title>
    <script type="text/javascript" src="menu.js"></script>
    <link rel="icon" type="image/x-icon" href="icon.ico">
    <link rel="stylesheet" href="shared.css">
    <link rel="stylesheet" href="menu.css">
</head>

<body onload="updateBasketQuantity()">
    <header>
        <nav>
            <div class="logo"><a href="index.html"><img src="logo.svg" alt="Oaxaca Logo"></a></img></div>
            <div id="basket-quantity">ðŸ›’</div>
            <div class="menu-icon">
                <a>&#9776;</a>
                <div class="floating-window">
                    <a href="order.html">Basket</a>
                    <a href="staff.html">Staff</a>
                </div>
            </div>
        </nav>
    </header>

    <main>
        <div class="filter-container">
            <input type="text" id="searchTerm" placeholder="Search">
            <br>
            <div class="filter-options">
                <div class="filter-option">
                    <label for="maxCalories">Calories:</label>
                    <input type="range" id="maxCalories" min="0" max="2000" step="50" value="0"
                        oninput="document.getElementById('maxCaloriesValue').textContent = this.value">
                    <span id="maxCaloriesValue">0</span>
                </div>
                <br>
                <div class="filter-option">
                    <label for="maxPrice">Price:</label>
                    <input type="range" id="maxPrice" min="0" max="200" step="1" value="0"
                        oninput="document.getElementById('maxPriceValue').textContent = this.value">
                    <span id="maxPriceValue">0</span>
                </div>
                <br>
                <p style="font-size: 1.2em">Don't show dishes containing:</p>
                <div class="excludedAllergens">
                    <input type="checkbox" id="glutenAllergen">
                    <label for="glutenAllergen">Gluten</label>

                    <input type="checkbox" id="dairyAllergen">
                    <label for="dairyAllergen">Dairy</label><br>

                    <input type="checkbox" id="nutAllergen">
                    <label for="nutAllergen">Nuts</label>

                    <input type="checkbox" id="eggAllergen">
                    <label for="eggAllergen">Eggs</label><br>

                    <input type="checkbox" id="crustaceanAllergen">
                    <label for="crustaceanAllergen">Crustaceans</label>

                    <input type="checkbox" id="fishAllergen">
                    <label for="fishAllergen">Fish</label>
                </div>
                <button onclick="applyFilter()">Apply Filter</button>
                <button onclick="resetFilter()">Reset Filter</button>
                <button id="editButton" onclick="editMenu()">Edit Menu</button>
                <button onclick="clearBasket()">Clear basket</button>
            </div>
        </div>

        <div id="menuEditSection" style="display: none">
            <div id='newItemDiv'>
                <h3>Add New Item:</h3>
                <p>
                    <label>Name:</label>
                    <input type='text' id='newItemNameField'><br>
                    <label>Upload Image</label>
                    <input type='file' id='newItemFileUpload'><br>
                    <label>Price:</label>
                    <input type='text' id='newItemPriceField'><br>
                    <label>Calories:</label>
                    <input type='text' id='newItemCaloriesField'><br>
                    <label>Allergens:</label>
                    <div id="newItemAllergens">
                        <input type="checkbox" id="newItemGlutenAllergen">
                        <label for="newItemGlutenAllergen">Gluten</label>
        
                        <input type="checkbox" id="newItemDairyAllergen">
                        <label for="newItemDairyAllergen">Dairy</label><br>
        
                        <input type="checkbox" id="newItemNutAllergen">
                        <label for="newItemNutAllergen">Nuts</label>
        
                        <input type="checkbox" id="newItemEggAllergen">
                        <label for="newItemEggAllergen">Eggs</label><br>
        
                        <input type="checkbox" id="newItemCrustaceanAllergen">
                        <label for="newItemCrustaceanAllergen">Crustaceans</label>
        
                        <input type="checkbox" id="newItemFishAllergen">
                        <label for="newItemFishAllergen">Fish</label>
                    </div>
                    <button onclick='addMenuItem()'>Add Item</button>
                </p>
            </div>
        </div>

        <div id="MenuItemGridLayout" class="menu-grid"></div>
    </main>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            initMenuAll();
        });

        function resetFilter() {
            document.getElementById('searchTerm').value = '';
            document.getElementById('maxCalories').value = 0;
            document.getElementById('maxPrice').value = 0;
            document.querySelectorAll('.excludedAllergens > input[type="checkbox"]').forEach(item => {
                item.checked = false
            });
            document.getElementById('maxPriceValue').textContent = "0";
            document.getElementById('maxCaloriesValue').textContent = "0";

            applyFilter();
        }
    </script>
</body>

</html>